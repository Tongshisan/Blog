# setState



```jsx
setState(updater, [callback])
```



`setState()` 将对组件 `state` 的更改排入队列, 并通知 `React` 需要使用更新后的 `state` 更新此组件及其自子组件, 这是用于更新用户界面以响应事件处理器和处理服务器数据的主要方式.



## setState 是异步的吗？

+ `setState` 只在 `合成事件` 和 `钩子函数` 中是 "异步" 的, 在 `原生事件` 和 `setTimeour ` 中是同步的
+ `setState` 的 "异步" 并不是说其内部代码是异步的, 其实本身的执行过程和代码都是同步的, 只是 `合成事件` 和 `钩子函数` 调用顺序在更新之前, 导致在 `合成事件` 和 `钩子函数` 中没办法立即拿到更新后的值, 形成了所谓的 "异步", 但是可以在第二个参数 `callback` 中拿到更新后的值
+ `setState` 的批量更新优化也是建立在 "异步" (合成事件, 钩子函数) 之上的, 在原生事件和 `setTimeout` 中不会批量更新, 在 "异步" 中如果对同一个值更新多次 (`setState`) , `setState` 的批量更新策略会对其进行覆盖, 取最后一次的执行, 如果同时 `setState` 多个不同的值, 在更新时会对其进行合并批量更新 